---
title: Consulta via API
description: Manual para consultar dados do Syspro ERP via API, com rotas, campos e exemplos práticos
icon: Code
---

import { Cards, Card } from 'fumadocs-ui/components/card';
import { Callout } from 'fumadocs-ui/components/callout';
import { Accordions, Accordion } from 'fumadocs-ui/components/accordion';
import { Tabs, Tab } from 'fumadocs-ui/components/tabs';

## Introdução

Este manual orienta desenvolvedores e analistas sobre como consultar dados do **Syspro ERP** por meio de sua API. Ele abrange a configuração e o uso de rotas para acessar informações como vendas, estoque, produção, títulos a pagar/receber e transporte. Inclui exemplos de URLs (com e sem IIS), passos para autenticação e integração com ferramentas como Power BI, além de uma lista detalhada dos campos retornados por cada rota.

<Callout title="Pré-requisitos">
  - Endereço do servidor e porta da API (ex.: `api.minhaempresa.com:8080`).
  - Ferramenta para testes (ex.: Postman) ou integração (ex.: Power BI).
</Callout>

### Entendendo a URL de Requisição

Para consultar a API, você precisa montar uma URL específica. Ela é composta por quatro partes principais: o **servidor**, a **porta**, o **caminho da rota** e os **parâmetros** da consulta.

A parte mais importante a ser observada é o caminho, que muda dependendo se o ambiente utiliza ou não o **IIS (Internet Information Services)** como servidor web.

<Tabs items={['Exemplo Prático: Sem IIS', 'Exemplo Prático: Com IIS']}>
   <Tab value="Exemplo Prático: Sem IIS">
   Neste cenário, a URL é mais direta. A rota da API (`/api/exporta/...`) vem logo após o endereço do servidor e porta.

   Usando os dados:
   - **Servidor**: `api.minhaempresa.com`
   - **Porta**: `8080`
   - **Rota**: Vendas de produto
   - **Período**: `01/01/2024` a `10/01/2024`

   A URL final seria:
   ```html title="URL sem IIS"
      http://api.minhaempresa.com:8080/api/exporta/produto/venda?dt_inicial=01/01/2024&dt_final=10/01/2024
   ```
   </Tab>

   <Tab value="Exemplo Prático: Com IIS">
   Quando o IIS está em uso, é necessário adicionar sysproserverisapi.dll ao caminho da URL, antes da rota da API.

   Usando os mesmos dados:
   - **Servidor**: `api.minhaempresa.com`
   - **Porta**: `8080`
   - **Rota**: Vendas de produto
   - **Período**: `01/01/2024` a `10/01/2024`

   ```html title="URL usando o IIS"
      http://api.minhaempresa.com:8080/sysproserverisapi.dll/api/exporta/produto/venda?dt_inicial=01/01/2024&dt_final=10/01/2024

   ```
   </Tab>
</Tabs>

<Callout title="Confirme a sua configuração!" type="warn">
A única forma de saber qual URL usar é confirmando com o administrador do sistema ou a equipe de TI responsável pelo Syspro ERP. Usar o caminho errado resultará em um erro 404 (Not Found).
</Callout>



## Passo a Passo

Siga estas etapas para acessar a API do Syspro ERP:

<div className='fd-steps [&_h3]:fd-step'>
  <h3>Obter URL e Porta</h3>
    Solicite ao suporte técnico do Syspro ERP o a url e porta para acessar a API. Use os canais listados na seção "Suporte" abaixo.

  <h3>Configurar a URL</h3>
    Substitua `servidor` e `porta` na URL pela configuração do seu ambiente (ex.: `api.minhaempresa.com:8080`).

  <h3>Consultar Dados</h3>
    Envie a requisição via ferramenta de teste (ex.: Postman) ou integre diretamente em plataformas como Power BI, ajustando os parâmetros (ex.: `dt_inicial` e `dt_final`).

   ### Exemplos de Implementação

Este exemplo em python e utiliza a biblioteca requests para buscar os dados de vendas .

<Tabs items={['Python', 'Power BI']}>
   <Tab value="Python">

   ```python title="Exemplo consulta em pyton"
   import requests

   # URL completa da API
   url = "http://api.minhaempresa.com:8080/api/exporta/produto/venda?dt_inicial=01/01/2024&dt_final=31/01/2024"

   try:
      # Executa a requisição
      response = requests.get(url)
      
      # Verifica se a requisição foi bem-sucedida
      response.raise_for_status() 

      # Imprime os dados recebidos (assumindo que é um JSON)
      print(response.json())

   except requests.exceptions.RequestException as e:
      print(f"Ocorreu um erro na requisição: {e}")
   ```

   </Tab>
   <Tab value="Power BI">
   O Power BI pode se conectar diretamente à API do Syspro para criar relatórios dinâmicos.

   1.  **Obter Dados da Web:**
      Na guia **Página Inicial**, clique em **Obter Dados** e selecione **Web**.

   2.  **Configurar URL:**
      Na janela que abrir, selecione a opção **Básico**. 
      - Cole a URL base (`http://api.minhaempresa.com:8080/api/exporta/produto/venda?dt_inicial=01/01/2024&dt_final=31/01/2024`)
      - Clique em **OK**.

   3.  **Converter para Tabela:**
      O Power BI exibirá o editor do Power Query com os dados retornados. Se os dados aparecerem como uma lista de registros, clique em **Para a Tabela** no menu superior e, em seguida, expanda as colunas para visualizar todas as informações.

   4.  **Carregar Dados:**
      Após os ajustes, clique em **Fechar e Aplicar**. Os dados da API estarão disponíveis para a criação de visuais e relatórios no Power BI.

   <Callout title="Dica" type="tip">
   Para relatórios dinâmicos, crie **Parâmetros** no Power Query para as datas `dt_inicial` e `dt_final`. Assim, os usuários poderão alterar o período do relatório sem precisar editar a consulta.
   </Callout>

   </Tab>
</Tabs>

</div>

<Callout title="Dica" type="tip">
  Teste as rotas primeiro em um ambiente de desenvolvimento para validar os dados retornados antes de integrar em produção.
</Callout>

## Rotas da API

A seguir, as principais rotas disponíveis, com URLs, exemplos e campos retornados.

### Vendas de Produtos

<Tabs items={['Sem IIS', 'Com IIS']}>
  <Tab value="Sem IIS">
    <p>Acesso direto à API, sem intermediários.</p>
    ```html title="URL Padrão (Sem IIS)"
    http://servidor:porta/api/exporta/produto/venda?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
  <Tab value="Com IIS">
    <p>Acesso que passa pelo servidor IIS, exigindo <code>sysproserverisapi.dll</code> no caminho.</p>
    ```html title="URL com IIS"
    http://servidor:porta/sysproserverisapi.dll/api/exporta/produto/venda?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
</Tabs>

#### Campos Retornados
| **Campo Descritivo**            | **Nome na API**              | **Descrição**                                  |
|---------------------------------|------------------------------|------------------------------------------------|
| Código da Empresa (Emitente)    | `empresa_codigo`            | Identificador da empresa que emitiu a venda    |
| Número da Venda                 | `nf_numero`                 | Número único da nota fiscal ou venda           |
| Nome do Cliente                 | `cliente_nome`              | Nome completo do cliente                       |
| Cidade do Cliente               | `cliente_cidade`            | Cidade do cliente                              |
| UF do Cliente                   | `cliente_uf`                | Estado (ex.: SP, RJ) do cliente                |
| Código do Produto               | `produto_id`                | Código interno do produto vendido              |
| Descrição do Produto            | `produto_descricao`         | Nome ou descrição do produto                   |
| Departamento                    | `produto_departamento`      | Categoria ou setor do produto                  |
| Unidade de Medida               | `produto_un`                | Unidade do produto (ex.: UN, KG)               |
| Quantidade                      | `produto_qtde`              | Quantidade vendida                             |
| Valor Unitário                  | `produto_vlr_item`          | Valor bruto por unidade                        |
| Valor de Substituição Tributária| `produto_vlr_icms_stb`      | Valor do ICMS ST, se aplicável                 |
| Valor de Desconto               | `produto_vlr_desconto`      | Desconto aplicado no item                      |
| Valor de Frete                  | `produto_vlr_frete`         | Custo de frete associado ao item               |
| Valor Total do Item             | `produto_vlr_total_item`    | Valor final do item (com descontos e taxas)    |
| Nome do Vendedor                | `vendedor_nome`             | Nome do vendedor responsável                   |
| Data da Venda                   | `nf_dt_emissao`             | Data de emissão da venda (formato: DD/MM/AAAA) |
| Modelo do Documento             | `nf_modelo`                 | Tipo de documento (ex.: 55 - NF-e, 65 - NFC-e) |
| Forma de Pagamento              | `nf_forma_pagto`            | Método de pagamento (ex.: Dinheiro, Cartão)    |


### Movimentações de Estoque

<Tabs items={['Sem IIS', 'Com IIS']}>
  <Tab value="Sem IIS">
    <p>Acesso direto à API, sem intermediários.</p>
    ```html title="URL Padrão (Sem IIS)"
    http://servidor:porta/api/exporta/produto/kardex?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
  <Tab value="Com IIS">
    <p>Acesso que passa pelo servidor IIS, exigindo <code>sysproserverisapi.dll</code> no caminho.</p>
    ```html title="URL com IIS"
    http://servidor:porta/sysproserverisapi.dll/api/exporta/produto/kardex?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
</Tabs>

#### Campos Retornados
| **Campo Descritivo**   | **Nome na API**         | **Descrição**                                  |
|-----------------------|-------------------------|------------------------------------------------|
| Código Auxiliar       | `codigo_auxiliar`      | Código secundário do produto                   |
| Descrição do Produto  | `produto_descricao`    | Nome ou descrição do produto                   |
| Data do Movimento     | `data_movimento`       | Data da movimentação (formato: DD/MM/AAAA)     |
| Quantidade Anterior   | `qtde_anterior`        | Estoque antes do movimento                     |
| Quantidade Movimentada| `qtde_movimentada`     | Quantidade entrada ou saída                    |
| Saldo                 | `saldo`                | Estoque após o movimento                       |
| Documento             | `documento`            | Número do documento (ex.: NF, ordem interna)   |
| Participante          | `participante`         | Fornecedor ou cliente envolvido                |
| Operação              | `operacao`             | Tipo de movimento (ex.: Entrada, Saída)        |

### Produção de Produtos

<Tabs items={['Sem IIS', 'Com IIS']}>
  <Tab value="Sem IIS">
    <p>Acesso direto à API, sem intermediários.</p>
    ```html title="URL Padrão (Sem IIS)"
    http://servidor:porta/syspro/exporta/api/producao?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
  <Tab value="Com IIS">
    <p>Acesso que passa pelo servidor IIS, exigindo <code>sysproserverisapi.dll</code> no caminho.</p>
    ```html title="URL com IIS"
    http://servidor:porta/sysproserverisapi.dll/api/exporta/produto/producao?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
</Tabs>


#### Campos Retornados
| **Campo Descritivo**   | **Nome na API**         | **Descrição**                                  |
|-----------------------|-------------------------|------------------------------------------------|
| Data da Produção      | `data`                 | Data do registro da produção (DD/MM/AAAA)      |
| Observação            | `observacao`           | Notas ou comentários sobre a produção          |
| Produto               | `produto`              | Código ou descrição do produto produzido       |
| Quantidade Prevista   | `quantidade`           | Quantidade planejada para produção             |
| Quantidade Produzida  | `produzido`            | Quantidade efetivamente produzida              |
| Operador              | `operador`             | Nome ou ID do responsável pela produção        |

### Títulos a Pagar

<Tabs items={['Sem IIS', 'Com IIS']}>
  <Tab value="Sem IIS">
    <p>Acesso direto à API, sem intermediários.</p>
    ```html title="URL Padrão (Sem IIS)"
    http://servidor:porta/api/exporta/titulo/pagar?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
  <Tab value="Com IIS">
    <p>Acesso que passa pelo servidor IIS, exigindo <code>sysproserverisapi.dll</code> no caminho.</p>
    ```html title="URL com IIS"
    http://servidor:porta/sysproserverisapi.dll/api/exporta/titulo/pagar?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
</Tabs>


#### Campos Retornados
| **Campo Descritivo**          | **Nome na API**           | **Descrição**                                  |
|------------------------------|---------------------------|------------------------------------------------|
| Código da Empresa            | `empresa_codigo`         | Identificador da empresa                       |
| Número do Documento          | `numero_documento`       | Número do título ou nota                       |
| Nome do Fornecedor           | `fornecedor_nome`        | Nome do fornecedor                             |
| Data de Emissão              | `data_emissao`           | Data de emissão do título (DD/MM/AAAA)         |
| Data de Vencimento           | `data_vencimento`        | Data de vencimento (DD/MM/AAAA)                |
| Data de Pagamento            | `data_pagamento`         | Data da liquidação, se pago (DD/MM/AAAA)       |
| Valor Original               | `valor`                  | Valor original do título                       |
| Juros/Multa                  | `juros_multa`            | Valor de juros ou multa aplicados              |
| Desconto                     | `desconto`               | Valor de desconto concedido                    |
| Valor Total                  | `valor_total`            | Valor final após ajustes                       |
| Forma de Pagamento           | `forma_pagto_liquidacao` | Método de pagamento usado (ex.: Boleto, PIX)   |

### Títulos a Receber

<Tabs items={['Sem IIS', 'Com IIS']}>
  <Tab value="Sem IIS">
    <p>Acesso direto à API, sem intermediários.</p>
    ```html title="URL Padrão (Sem IIS)"
    http://servidor:porta/syspro/exporta/api/receber?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
  <Tab value="Com IIS">
    <p>Acesso que passa pelo servidor IIS, exigindo <code>sysproserverisapi.dll</code> no caminho.</p>
    ```html title="URL com IIS"
    http://servidor:porta/sysproserverisapi.dll/api/exporta/titulo/receber?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
</Tabs>

#### Campos Retornados
| **Campo Descritivo**          | **Nome na API**           | **Descrição**                                  |
|------------------------------|---------------------------|------------------------------------------------|
| Código da Empresa            | `empresa_codigo`         | Identificador da empresa                       |
| Número do Documento          | `numero_documento`       | Número do título ou nota                       |
| Nome do Cliente              | `cliente_nome`           | Nome do cliente                                |
| Tipo de Documento            | `tipo_documento`         | Tipo do título (ex.: Boleto, Duplicata)        |
| Data de Emissão              | `data_emissao`           | Data de emissão (DD/MM/AAAA)                   |
| Data de Vencimento           | `data_vencimento`        | Data de vencimento (DD/MM/AAAA)                |
| Data de Pagamento            | `data_pagamento`         | Data da liquidação, se pago (DD/MM/AAAA)       |
| Valor Original               | `valor`                  | Valor original do título                       |
| Juros/Multa                  | `juros_multa`            | Valor de juros ou multa aplicados              |
| Desconto                     | `desconto`               | Valor de desconto concedido                    |
| Valor Total                  | `valor_total`            | Valor final após ajustes                       |

### Rotas de Transporte

<Tabs items={['Sem IIS', 'Com IIS']}>
  <Tab value="Sem IIS">
    <p>Acesso direto à API, sem intermediários.</p>
    ```html title="URL Padrão (Sem IIS)"
    http://servidor:porta/api/exporta/transporte/rota?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
  <Tab value="Com IIS">
    <p>Acesso que passa pelo servidor IIS, exigindo <code>sysproserverisapi.dll</code> no caminho.</p>
    ```html title="URL com IIS"
    http://servidor:porta/sysproserverisapi.dll/api/exporta/transporte/rota?dt_inicial=01/01/2024&dt_final=10/01/2024
    ```
  </Tab>
</Tabs>

#### Campos Retornados
| **Campo Descritivo**   | **Nome na API**         | **Descrição**                                  |
|-----------------------|-------------------------|------------------------------------------------|
| Data da Rota          | `data`                 | Data do transporte (DD/MM/AAAA)                |
| Nome do Cliente       | `cliente`              | Cliente associado à rota                       |
| Produto Transportado  | `produto`              | Código ou descrição do produto                 |
| Quantidade            | `quantidade`           | Quantidade transportada                        |
| Peso da Carga         | `peso`                 | Peso total em kg                               |
| Veículo               | `veiculo`              | Identificador ou modelo do veículo             |
| Motorista             | `motorista`            | Nome do motorista                              |
| Rota Percorrida       | `rotas`                | Descrição ou código da rota                    |
| Placa do Veículo      | `placa_veiculo`        | Placa do veículo (ex.: ABC-1234)               |



