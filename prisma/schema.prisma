datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

// ---------------------------------------------------------
// MODELOS REQUERIDOS E AJUSTADOS (Melhor Compatibilidade)
// ---------------------------------------------------------

model User {
  id            String    @id @default(cuid())
  
  // CAMPOS DE AUTENTICAÇÃO
  email         String    @unique
  passwordHash  String?   // CORRIGIDO: Agora é passwordHash
  emailVerified DateTime? // ADICIONADO: Padrão do adaptador

  // CAMPOS CUSTOMIZADOS
  name          String?
  role          String    @default("cliente") // Essencial para o RBAC!
  
  // CAMPOS DE METADADOS
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  // RELAÇÕES OBRIGATÓRIAS
  sessions      Session[]
}

model Session {
  id           String   @id @default(cuid())
  userId       String
  sessionToken String   @unique // OBRIGATÓRIO: Chave de busca para o Better Auth
  expires      DateTime // CONVENÇÃO: Melhor usar 'expires'

  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}
